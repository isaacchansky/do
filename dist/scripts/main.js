$(document).ready(function(){"use strict";function t(){d.find("input").last().focus()}function n(){d.append(c),$(document).trigger("todos:changed")}function e(t){$(t.target).parent().remove(),$(document).trigger("todos:changed")}function o(){var t=$.map($(".js-todo-text"),function(t){return t.value});t=t.filter(function(t){return t.length>0}),localStorage.setItem("todos",JSON.stringify(t))}var d=$(".js-todo-container"),c=$(".js-todo-tpl").html(),a=JSON.parse(localStorage.getItem("todos"));a&&0!==a.length||(a=[""]),$(document).on("click",".js-todo-add",n),$(document).on("click",".js-todo-delete",e),$(document).on("change",".js-todo-text",o),d.on("keydown","input",function(t){var o=t.which;return 13===o&&0!==t.target.value.length?(t.preventDefault(),void n()):8===o&&0===t.target.value.length?(t.preventDefault(),void e(t)):void 0}),$(document).on("todos:changed",function(){o(),t()}),$.each(a,function(t,n){var e=$(c);e.find("input").val(n),d.append(e)})});